<div class="catalogue">
  <!-- Search Component -->
  <app-search (searchChanged)="onSearchChanged($event)"></app-search>
  
  <div class="candles-grid">
    <!-- No Results Message -->
    @if (getProductsArray().length === 0 && searchTerm.trim()) {
      <div class="no-results">
        <i class="fas fa-search"></i>
        <h3>No candles found</h3>
        <p>Try searching for "Christmas", "Vanilla", "Berry" or other candle names</p>
      </div>
    }
    
    <!-- Generic Candle Card -->
    @for (product of getProductsArray(); track product.id) {
      <div class="candle-card" (click)="openModal(product.id)">
        
        <div class="card-image">
          <!-- Product Image -->
            <img [src]="product.image" [alt]="product.name" class="candle-image">
            
            <!-- Image Indicators for Multiple Images -->
            @if (hasMultipleImages(product)) {
              <div class="image-indicator">
                @for (img of product.images; track img; let i = $index) {
                  <span class="dot"></span>
                }
              </div>
            }
        </div>
        
        <div class="card-content">
          <h3 class="product-name">{{ product.name }}</h3>
          
          <!-- Pricing -->
          <div class="price-container">
            @if (hasDiscountPricing(product)) {
              <span class="original-price">{{ getOriginalPrice(product) }}</span>
              <span class="discount-badge" style="color: #28a745; font-size: 12px; font-weight: bold; margin: 0 5px;">{{ calculateDiscount(product) }}</span>
            }
            <p class="product-price">{{ product.price }}</p>
          </div>
        </div>
      </div>
    }
  </div>
</div>
